syntax = "proto3";
package GamePto;

enum BuffEnum{
	Freeze = 0;//冰冻
}

message UserInfo{
	string nick = 0;
	int32 power = 1;
	int32 uid = 2;
}

message Card{
	int32 cardId = 0;
	int32 attack = 1;
	int32 health = 2;
	int32 fee = 3;//战场上的卡用不到，手牌会用到
	int32 uid = 4;
	int32 blockX = 5;
	int32 blockY = 6;
	bool allowAtk = 7;
	bool allowMove = 8;
	repeated BuffEnum buffArr = 9;
}

message MapData{
	repeated Card eventCards = 0;
	repeated Card unitCards = 1;
}

//===================Client message===================

//准备开始(包含更换卡牌数据)
message C_PREPARE_TO_START{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 1];
	repeated int32 replaceCardIndexes = 3;
}

//请求结束回合
message C_END_ROUND{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 2];
}

//弃牌
message C_DISCARD{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 3];
	int32 cardIndex = 3;
}

//使用卡牌
message C_USE_CARD{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 4];
	int32 cardIndex = 3;
	int32 blockX = 4;
	int32 blockY = 5;
}

//===================Server message===================

//服务端异常 关闭场景
message S_SERVER_ERROR{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10000];
	string message = 3;
}

//初始化游戏
message S_INIT_GAME{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10001];
	repeated UserInfo users = 3;
}

//开始游戏
message S_GAME_START{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10002];
	int32 firstUid = 3;
	repeated Card cards = 4;
	MapData mapData = 5;
	int64 replaceEndTime = 6;
}

//替换手牌
message S_REPLACE_CARDS{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10003];
	repeated Card cards = 3;
	repeated int32 replaceCardIndexes = 4;
	int32 uid = 5;
}

//回合开始
message S_ROUND_START_EVENT{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10004];
	int32 uid = 3;
	int32 atkTimes = 4;
	int32 atkTimesLimit = 5;
	int32 moveTimes = 6;
	int32 moveTimesLimit = 7;
}

//回合结束
message S_ROUND_END_EVENT{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10005];
	int32 uid = 3;
}

//抽卡疲劳
message S_DRAW_CARDS{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10006];
	repeated Card cards = 3;
	int32 cardCount = 4;
	repeated int32 damages = 5;
	int32 uid = 6;
	int32 cardPoolNum = 7;
	int32 deadPoolNum = 8;
}

//费用协议
message S_FEE_INFO{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10007];
	int32 fee = 3;
	int32 maxFee = 4;
	int32 uid = 5;
}

//弃牌
message S_DISCARD{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10008];
	bool isSuccess = 3;
	int32 cardIndex = 4;
	int32 fee = 5;
	int32 feeMax = 6;
	int32 uid = 7;
}

//使用卡牌
message S_USE_CARD{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10009];
	bool isSuccess = 3;
	int32 fee = 5;
	int32 feeMax = 6;	
	int32 uid = 7;
	int32 cardIndex = 8;
	Card card = 9;
}

//下发回合结束时间
message S_ROUND_END_TIME{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10010];
	int64 endTime = 3;
	int32 uid = 4;
}

//地图数据
message S_MAP_DATA{
	int32 cmd = 1[default = 200]; 
	int32 scmd = 2[default = 10011];
	MapData mapData = 3;
}